"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchAddressLookupTableAccountsFromTx = fetchAddressLookupTableAccountsFromTx;
const web3_js_1 = require("@solana/web3.js");
const exceptions_1 = require("../../exceptions");
async function fetchAddressLookupTableAccountsFromTx(transaction, connection) {
    return await Promise.all(transaction.message.addressTableLookups.map(async (lookup) => {
        return new web3_js_1.AddressLookupTableAccount({
            key: lookup.accountKey,
            state: web3_js_1.AddressLookupTableAccount.deserialize(await connection.getAccountInfo(lookup.accountKey).then((res) => {
                if (!res) {
                    throw new exceptions_1.SdkError("Cannot get AccountInfo");
                }
                return res.data;
            })),
        });
    }));
}
//# sourceMappingURL=utils.js.map