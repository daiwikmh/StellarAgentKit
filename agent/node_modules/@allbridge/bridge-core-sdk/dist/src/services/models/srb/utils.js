"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getViewResultSoroban = getViewResultSoroban;
exports.isErrorSorobanResult = isErrorSorobanResult;
exports.signAndSendSoroban = signAndSendSoroban;
const stellar_sdk_1 = require("@stellar/stellar-sdk");
var Api = stellar_sdk_1.rpc.Api;
function getViewResultSoroban(assembledTx) {
    const { simulation, options } = assembledTx;
    if (!simulation) {
        throw new Error("Soroban assembled transaction does not have simulation");
    }
    if (Api.isSimulationSuccess(simulation)) {
        if (simulation.result == null) {
            return;
        }
        return options.parseResultXdr(simulation.result.retval);
    }
    else {
        throw new Error(simulation.error);
    }
}
function isErrorSorobanResult(assembledTx) {
    const { simulation } = assembledTx;
    if (!simulation) {
        throw new Error("Soroban assembled transaction does not have simulation");
    }
    return Api.isSimulationError(simulation);
}
async function signAndSendSoroban(assembledTx) {
    await assembledTx.simulate({ restore: true });
    return assembledTx.signAndSend();
}
//# sourceMappingURL=utils.js.map