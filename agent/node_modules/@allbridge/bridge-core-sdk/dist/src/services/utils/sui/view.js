"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.suiView = suiView;
const reified_1 = require("../../models/sui/_framework/reified");
const mockSender = "0x0000000000000000000000000000000000000000000000000000000000000000";
async function suiView(client, tx, reified) {
    const inspectionResult = await client.devInspectTransactionBlock({
        sender: mockSender,
        transactionBlock: tx,
    });
    if (inspectionResult.effects.status.status !== "success") {
        throw new Error(`inspectionResult failed. ${JSON.stringify(inspectionResult, null, 2)}`);
    }
    const returnValue = inspectionResult.results?.pop()?.returnValues?.pop();
    if (!returnValue) {
        throw new Error(`Something with inspectionResult went wrong. ${JSON.stringify(inspectionResult, null, 2)}`);
    }
    const [data, _type] = returnValue;
    if (typeof reified === "object") {
        return reified.fromBcs(Uint8Array.from(data)).toJSONField();
    }
    else {
        return (0, reified_1.toBcs)(reified).parse(Uint8Array.from(data));
    }
}
//# sourceMappingURL=view.js.map